<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Partners page of Landzy your AI assistant of real estate">
    <meta name="author" content="Helamã Verardo Petri Corrêa">
    <title>Adicionar Imóvel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles/partners.css">
  </head>
  <body>
    <header>
        <img class="logo" src="/static/images/landzy-logo.svg" alt="landzy logo" height="30">
        <nav class="navigation">
            <div>
                <a href="/static/home.html">Início</a>
                <a href="/static/partners.html">Anunciar</a>
                <a href="/static/partner-access.html">Parceiro</a>
                <a class="start-now" href="/static/chat.html">Encontre seu Imóvel</a>
            </div>
        </nav>
            <button type="button" id="menu"></button>
    </header>
        <main>
        <h2>Your Properties</h2>
        <ul id="propertyList"></ul>

        <script>
        fetch('/partner/properties/data')
            .then(res => res.json())
            .then(data => {
            const list = document.getElementById('propertyList');
            data.forEach(p => {
                const li = document.createElement('li');
                li.innerHTML = `
                <strong>${p.title}</strong> - ${p.city} - R$ ${p.price}
                <button onclick="viewProperty(${p.id})">View</button>
                <button onclick="editProperty(${p.id})">Edit</button>
                <button onclick="deleteProperty(${p.id})">Delete</button>
                `;
                list.appendChild(li);
            });
            });

        function viewProperty(id) {
            window.location.href = `/partner/property/${id}`;
        }

        function editProperty(id) {
            window.location.href = `/partner/property/${id}/edit`;
        }

        function deleteProperty(id) {
            if (confirm('Are you sure you want to delete this property?')) {
            fetch(`/partner/property/${id}/delete`, { method: 'POST' })
                .then(res => res.json())
                .then(() => location.reload());
            }
        }
        </script>
        </main>
    <footer>
        <div>
        <p>
            &copy; <span id="current-year"></span> Helamã Verardo Petri Corrêa, SC/Brazil
        </p>
        <p id="last-modified"></p>
        </div>
    </footer>  
  <script src="/static/scripts/hambMenu.js" defer></script>
  <script src="/static/scripts/getdates.js" defer></script>
  </body>
</html>
